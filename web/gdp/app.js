!function e(t,r,a){function n(i,o){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return n(r?r:e)},u,u.exports,e,t,r,a)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(e,t,r){},{}],2:[function(e,t,r){function a(){var e=["appGDP.routerModule","appGDP.uiModule"];window.appCentralink=angular.module("appGDP",e),angular.bootstrap(document,["appGDP"])}e("fs"),e("./gdp-ui/_index"),e("./ui-router/_index"),angular.element(document).ready(a)},{"./gdp-ui/_index":3,"./ui-router/_index":15,fs:1}],3:[function(e,t,r){t.exports=angular.module("appGDP.uiModule",["ui.bootstrap","ngSanitize","toastr","draganddrop"]),{directives:{"assignTask.directive":e("./directives/assignTask.directive.js"),"datepicker.directive":e("./directives/datepicker.directive.js"),"draggable.directive":e("./directives/draggable.directive.js"),"droppable.directive":e("./directives/droppable.directive.js"),"editTask.directive":e("./directives/editTask.directive.js"),"example.directive":e("./directives/example.directive.js"),"header.directive":e("./directives/header.directive.js"),"taskView.directive":e("./directives/taskView.directive.js")},"planning.controller":e("./planning.controller.js"),"requester.service":e("./requester.service.js"),"task.controller":e("./task.controller.js")}},{"./directives/assignTask.directive.js":4,"./directives/datepicker.directive.js":5,"./directives/draggable.directive.js":6,"./directives/droppable.directive.js":7,"./directives/editTask.directive.js":8,"./directives/example.directive.js":9,"./directives/header.directive.js":10,"./directives/taskView.directive.js":11,"./planning.controller.js":12,"./requester.service.js":13,"./task.controller.js":14}],4:[function(e,t,r){function a(){return{restrict:"E",templateUrl:"views/tasks/assign-task.html"}}var n=e("../_index");n.directive("assignTask",a)},{"../_index":3}],5:[function(e,t,r){function a(){return{restrict:"EA",templateUrl:"views/datepicker.html",link:function(e,t,r){function a(t){e.currentDate.addMonths(t),i()}function n(){for(var e=Date.today().monday(),t=[],r=0;r++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function s(t){t.getMonth()<e.currentDate.getMonth()?a(-1):t.getMonth()>e.currentDate.getMonth()&&a(1),e.selectedDay=angular.copy(t),e.$parent.selectedDay=angular.copy(t),e.dateSelection=!1}function i(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),r=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;r+=r%7==0?0:7-r%7;var a=[],n=angular.copy(t).addDays(1).getDay()-1;-1==n&&(n=6);var s=angular.copy(t).addDays(-n);r+=e.currentDate.getMonth()==angular.copy(s).addDays(r+1).getMonth()?7:0;for(var i=0;i++<r;)s.addDays(1),a.push(angular.copy(s));e.days=a}e.shiftMonth=a,e.pick=s,e.getDays=n,e.currentDate=null,e.dateSelection=!1,e.days=[],e.max=null!=r.max?Date.today().addDays(parseInt(r.max-1)):null,e.min=void 0!=r.min?Date.today().addDays(parseInt(r.min)):null,e.today=Date.today(),function(){i(),n()}()}}}var n=e("../_index");n.directive("datePick",a)},{"../_index":3}],6:[function(e,t,r){function a(){return function(e,t){var r=t[0];r.draggable=!0,r.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),r.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}var n=e("../_index");n.directive("draggable",a)},{"../_index":3}],7:[function(e,t,r){function a(){return{scope:{drop:"&",target:"&",bin:"="},link:function(e,t){var r=t[0];r.addEventListener("dragover",function(t){t.dataTransfer.dropEffect="move",t.preventDefault&&t.preventDefault();var r=t.target.attributes.socket;return console.log(t),r&&r.value==e.gem&&console.log("ok"),this.classList.add("over"),!1},!1),r.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),r.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),r.addEventListener("drop",function(t){t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var r=this.id,a=document.getElementById(t.dataTransfer.getData("Text"));return this.appendChild(a),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(a.id,r)}),!1},!1)}}}var n=e("../_index");n.directive("droppable",a)},{"../_index":3}],8:[function(e,t,r){function a(){return{restrict:"E",templateUrl:"views/tasks/edit-task.html"}}var n=e("../_index");n.directive("editTask",a)},{"../_index":3}],9:[function(e,t,r){},{}],10:[function(e,t,r){function a(){return{restrict:"E",templateUrl:"views/header/header.html"}}var n=e("../_index");n.directive("fablabHeader",a)},{"../_index":3}],11:[function(e,t,r){function a(){return{restrict:"E",templateUrl:"views/tasks/tasks-summary.html"}}var n=e("../_index");n.directive("taskView",a)},{"../_index":3}],12:[function(e,t,r){function a(e,t,r){function a(t){e.currentDate.addMonths(t),i()}function n(){t.getTasks(e.currentProject.id,function(t){for(var r in t.data){var a=new Date(t.data[r].date);e.tasks[a]||(e.tasks[a]=[]),e.tasks[a].push(t.data[r])}o(0)})}function s(){for(var e=Date.today().monday(),t=[],r=0;r++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function i(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),r=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;r+=r%7==0?0:7-r%7;var a=[],n=angular.copy(t).addDays(1).getDay()-1;-1==n&&(n=6);var s=angular.copy(t).addDays(-n);r+=e.currentDate.getMonth()==angular.copy(s).addDays(r+1).getMonth()?7:0;for(var i=0;i++<r;)s.addDays(1),s.toString()==Date.today().toString()&&(e.startWeek=Math.floor(i/7)),a.push(angular.copy(s));e.days=a}function o(t){if(t)if(e.currentWeek+t<0){var r=e.days[0].getDate();a(-1);var n=Math.floor((e.days.length-1)/7)-1;e.currentWeek=r==e.days.length-7?n-1:n}else if(e.days.length<7*(e.currentWeek+1+t)){var r=e.days[e.days.length-7].getDate();a(1),e.currentWeek=e.days[0].getDate()==r?1:0}else e.currentWeek+=t;else e.currentWeek=e.startWeek;var s=e.currentWeek;e.daysWeek=[];for(var i=7*s;7*(s+1)>i;i++)e.daysWeek[i-7*s]=e.days[i];return!0}e.tasks={},e.shiftMonth=a,e.getDays=s,e.processWeek=o,e.currentDate=null,e.dateSelection=!1,e.days=[],e.startWeek=0,e.daysWeek=[],e.currentWeek=0,e.today=Date.today(),e.getDays=s,e.currentProject={id:3,name:"projet_test"},function(){n(),i()}()}var n=e("./_index");n.controller("planningController",["$scope","rq","toastr",a])},{"./_index":3}],13:[function(e,t,r){function a(e){function t(t,r){e.get(t).then(r,f)}function r(t,r,a){e.post(t,r).then(a,f)}function a(t,r,a){e.put(t,r).then(a,f)}function n(t,r){e["delete"](t).then(r,f)}function s(e,t){return{login:"/api/login_check",tasks:"/gdp/api/projects/"+e+"/tasks",lists:"/gdp/api/lists",deleteTask:"/gdp/api/tasks/"+e,users:"/gdp/api/projects/"+e+"/users",projects:"/gdp/api/users/project",assignTask:"/gdp/api/tasks/"+e+"/users/"+t}}function i(){JWTTOKEN?e.defaults.headers.common.Authorization="Bearer "+JWTTOKEN:console.log("WARNING: NO TOKEN FOUND")}function o(e,t,a){var n=new s(e);r(n.tasks,t,a)}function c(e,r){var a=new s(e);t(a.tasks,r)}function d(e,t){var r=new s(e);n(r.deleteTask,t)}function u(e,r){var a=new s(e);t(a.users,r)}function l(e){var r=new s(null);t(r.projects,e)}function p(e,t,r){var n=new s(e,t);a(n.assignTask,{},r)}function v(e,t){var a=new s(null);r(a.lists,e,t)}function f(e){console.log(e)}var g={init:i,createTask:o,getTasks:c,deleteTask:d,getUsers:u,getProjects:l,assignTaskToUser:p,createTaskList:v};return g}var n=e("./_index");n.factory("rq",["$http",a])},{"./_index":3}],14:[function(e,t,r){function a(e,t,r){function a(){e.newTask.endDate=e.selectedDay.toString(),t.createTask(e.currentProject.id,e.newTask,function(){r.success(["Tâche",e.newTask.title,"créée!"].join(" ")),e.newTask={title:"",body:"",endDate:""},i()})}function n(e,a){t.deleteTask(e,function(e){r.success(["Task",a,"has been removed."].join(" ")),i()})}function s(t,r){t=t["json/task"],t&&(r.data.push(t.name),e.tasks[t.sourceGroup].data.splice(t.sourceTask,1))}function i(){t.getTasks(e.currentProject.id,function(t){e.tasks[0].data=t.data,console.log(t.data)})}function o(){t.getUsers(e.currentProject.id,function(t){e.projectUsers=t.data,console.log(e.projectUsers)})}function c(r){t.getProjects(function(t){e.currentProject=t.data[0],e.userProjects=t.data,r&&r()})}function d(e,r){t.assignTaskToUser(e,r,function(e){i()})}function u(){var a={name:e.newTaskListName,project_id:e.currentProject.id};t.createTaskList(a,function(e){r.success(["List de tâches",a.name,"créée."].join(" "))})}e.showTaskCreated=!1,e.newTask={title:"",body:"",endDate:""},e.status={isopen:!1},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.selectedDay=Date.today(),e.onDragOver=function(e,t){},e.tasks=[{name:"à faire",data:[],space:1},{name:"en cours",data:[],space:2},{name:"fait",data:[],space:3}],e.projectUsers=[],e.spaceData=[{},{},{}],e.currentProject={},e.userProjects=[],e.newTaskListName="",e.createTask=a,e.deleteTask=n,e.onDropTaskInList=s,e.assignTaskToUser=d,e.createTaskList=u,function(){t.init(),c(function(){i(),o();for(var t in e.tasks){var r=e.tasks[t];e.spaceData[r.space-1]=r}})}()}var n=e("./_index");n.controller("taskController",["$scope","rq","toastr",a])},{"./_index":3}],15:[function(e,t,r){t.exports=angular.module("appGDP.routerModule",["ui.router","ngCookies"]),{"router.config":e("./router.config.js")}},{"./router.config.js":16}],16:[function(e,t,r){function a(e,t){e.state("main",{url:"/",templateUrl:"views/main.html",controller:"uiController",data:{access:"user"}}).state("tasks",{url:"/tasks",templateUrl:"views/tasks/tasks.html",controller:"taskController",data:{access:"user"}}).state("planning",{url:"/planning",templateUrl:"views/planning/planning.html",controller:"planningController",data:{access:"user"}}),t.otherwise("/")}a.$inject=["$stateProvider","$urlRouterProvider"];var n=e("./_index");n.config(a)},{"./_index":15}]},{},[2]);