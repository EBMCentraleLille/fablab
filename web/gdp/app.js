!function e(t,a,r){function n(i,o){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=a[i]={exports:{}};t[i][0].call(u.exports,function(e){var a=t[i][1][e];return n(a?a:e)},u,u.exports,e,t,a,r)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,a){},{}],2:[function(e,t,a){function r(){var e=["appGDP.routerModule","appGDP.uiModule"];window.appCentralink=angular.module("appGDP",e),angular.bootstrap(document,["appGDP"])}e("fs"),e("./gdp-ui/_index"),e("./ui-router/_index"),angular.element(document).ready(r)},{"./gdp-ui/_index":3,"./ui-router/_index":15,fs:1}],3:[function(e,t,a){t.exports=angular.module("appGDP.uiModule",["ui.bootstrap","ngSanitize","toastr","draganddrop"]),{directives:{"assignTask.directive":e("./directives/assignTask.directive.js"),"datepicker.directive":e("./directives/datepicker.directive.js"),"draggable.directive":e("./directives/draggable.directive.js"),"droppable.directive":e("./directives/droppable.directive.js"),"editTask.directive":e("./directives/editTask.directive.js"),"example.directive":e("./directives/example.directive.js"),"header.directive":e("./directives/header.directive.js"),"taskView.directive":e("./directives/taskView.directive.js")},"planning.controller":e("./planning.controller.js"),"requester.service":e("./requester.service.js"),"task.controller":e("./task.controller.js")}},{"./directives/assignTask.directive.js":4,"./directives/datepicker.directive.js":5,"./directives/draggable.directive.js":6,"./directives/droppable.directive.js":7,"./directives/editTask.directive.js":8,"./directives/example.directive.js":9,"./directives/header.directive.js":10,"./directives/taskView.directive.js":11,"./planning.controller.js":12,"./requester.service.js":13,"./task.controller.js":14}],4:[function(e,t,a){function r(){return{restrict:"E",templateUrl:"views/tasks/assign-task.html"}}var n=e("../_index");n.directive("assignTask",r)},{"../_index":3}],5:[function(e,t,a){function r(){return{restrict:"EA",templateUrl:"views/datepicker.html",link:function(e,t,a){function r(t){e.currentDate.addMonths(t),i()}function n(){for(var e=Date.today().monday(),t=[],a=0;a++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function s(t){t.getMonth()<e.currentDate.getMonth()?r(-1):t.getMonth()>e.currentDate.getMonth()&&r(1),e.selectedDay=angular.copy(t),e.$parent.selectedDay=angular.copy(t),e.dateSelection=!1}function i(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),a=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;a+=a%7==0?0:7-a%7;var r=[],n=angular.copy(t).addDays(1).getDay()-1;-1==n&&(n=6);var s=angular.copy(t).addDays(-n);a+=e.currentDate.getMonth()==angular.copy(s).addDays(a+1).getMonth()?7:0;for(var i=0;i++<a;)s.addDays(1),r.push(angular.copy(s));e.days=r}e.shiftMonth=r,e.pick=s,e.getDays=n,e.currentDate=null,e.dateSelection=!1,e.days=[],e.max=null!=a.max?Date.today().addDays(parseInt(a.max-1)):null,e.min=void 0!=a.min?Date.today().addDays(parseInt(a.min)):null,e.today=Date.today(),function(){i(),n()}()}}}var n=e("../_index");n.directive("datePick",r)},{"../_index":3}],6:[function(e,t,a){function r(){return function(e,t){var a=t[0];a.draggable=!0,a.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),a.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}var n=e("../_index");n.directive("draggable",r)},{"../_index":3}],7:[function(e,t,a){function r(){return{scope:{drop:"&",target:"&",bin:"="},link:function(e,t){var a=t[0];a.addEventListener("dragover",function(t){t.dataTransfer.dropEffect="move",t.preventDefault&&t.preventDefault();var a=t.target.attributes.socket;return console.log(t),a&&a.value==e.gem&&console.log("ok"),this.classList.add("over"),!1},!1),a.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),a.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),a.addEventListener("drop",function(t){t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var a=this.id,r=document.getElementById(t.dataTransfer.getData("Text"));return this.appendChild(r),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(r.id,a)}),!1},!1)}}}var n=e("../_index");n.directive("droppable",r)},{"../_index":3}],8:[function(e,t,a){function r(){return{restrict:"E",templateUrl:"views/tasks/edit-task.html"}}var n=e("../_index");n.directive("editTask",r)},{"../_index":3}],9:[function(e,t,a){},{}],10:[function(e,t,a){function r(){return{restrict:"E",templateUrl:"views/header/header.html"}}var n=e("../_index");n.directive("fablabHeader",r)},{"../_index":3}],11:[function(e,t,a){function r(){return{restrict:"E",templateUrl:"views/tasks/tasks-summary.html"}}var n=e("../_index");n.directive("taskView",r)},{"../_index":3}],12:[function(e,t,a){function r(e,t,a){function r(t){e.currentDate.addMonths(t),o()}function n(a){t.getProjects(function(t){e.currentProject=t.data[0],e.userProjects=t.data,a&&a()})}function s(){t.getTasks(e.currentProject.id,function(t){for(var a in t.data){var r=new Date(t.data[a].end_date);e.tasks[r]||(e.tasks[r]=[]),e.tasks[r].push(t.data[a])}c(0)})}function i(){for(var e=Date.today().monday(),t=[],a=0;a++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function o(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),a=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;a+=a%7==0?0:7-a%7;var r=[],n=angular.copy(t).addDays(1).getDay()-1;-1==n&&(n=6);var s=angular.copy(t).addDays(-n);a+=e.currentDate.getMonth()==angular.copy(s).addDays(a+1).getMonth()?7:0;for(var i=0;i++<a;)s.addDays(1),s.toString()==Date.today().toString()&&(e.startWeek=Math.floor(i/7)),r.push(angular.copy(s));e.days=r}function c(t){if(t)if(e.currentWeek+t<0){var a=e.days[0].getDate();r(-1);var n=Math.floor((e.days.length-1)/7)-1;e.currentWeek=a==e.days.length-7?n-1:n}else if(e.days.length<7*(e.currentWeek+1+t)){var a=e.days[e.days.length-7].getDate();r(1),e.currentWeek=e.days[0].getDate()==a?1:0}else e.currentWeek+=t;else e.currentWeek=e.startWeek;var s=e.currentWeek;e.daysWeek=[];for(var i=7*s;7*(s+1)>i;i++)e.daysWeek[i-7*s]=e.days[i];return!0}e.tasks={},e.shiftMonth=r,e.getDays=i,e.processWeek=c,e.currentDate=null,e.dateSelection=!1,e.days=[],e.startWeek=0,e.daysWeek=[],e.currentWeek=0,e.today=Date.today(),e.getDays=i,e.currentProject={},function(){t.init(),n(function(){s(),o()})}()}var n=e("./_index");n.controller("planningController",["$scope","rq","toastr",r])},{"./_index":3}],13:[function(e,t,a){function r(e){function t(t,a){e.get(t).then(a,k)}function a(t,a,r){e.post(t,a).then(r,k)}function r(t,a,r){e.put(t,a).then(r,k)}function n(t,a){e["delete"](t).then(a,k)}function s(e,t){return{login:"/api/login_check",tasks:"/gdp/api/projects/"+e+"/tasks",listCreate:"/gdp/api/lists",lists:"/gdp/api/projects/"+e+"/lists",deleteTask:"/gdp/api/tasks/"+e,users:"/gdp/api/projects/"+e+"/users",projects:"/gdp/api/users/project",assignTask:"/gdp/api/tasks/"+e+"/users/"+t,taskListAdd:"/gdp/api/lists"+e+"/adds/"+t}}function i(){JWTTOKEN&&(e.defaults.headers.common.Authorization="Bearer "+JWTTOKEN)}function o(e,t,r){var n=new s(e);a(n.tasks,t,r)}function c(e,a){var r=new s(e);t(r.tasks,a)}function d(e,t){var a=new s(e);n(a.deleteTask,t)}function u(e,a){var r=new s(e);t(r.users,a)}function l(e){var a=new s(null);t(a.projects,e)}function p(e,t,a){var n=new s(e,t);r(n.assignTask,{},a)}function f(e,t){var r=new s(null);a(r.listCreate,e,t)}function v(e,a){var r=new s(e);t(r.lists,a)}function g(e,t,a){var n=new s(e,t);r(n.taskListAdd,{},a)}function k(e){console.log(e)}var D={init:i,createTask:o,getTasks:c,deleteTask:d,getUsers:u,getProjects:l,assignTaskToUser:p,getTaskLists:v,createTaskList:f,getTaskLists:v,addTaskToList:g};return D}var n=e("./_index");n.factory("rq",["$http",r])},{"./_index":3}],14:[function(e,t,a){function r(e,t,a){function r(){e.newTask.endDate=e.selectedDay.toString(),t.createTask(e.currentProject.id,e.newTask,function(){a.success(["Tâche",e.newTask.title,"créée!"].join(" ")),e.newTask={title:"",body:"",endDate:""},i()})}function n(e,r){t.deleteTask(e,function(e){a.success(["Task",r,"has been removed."].join(" ")),i()})}function s(t,a){t=t["json/task"],t&&(a.data.push(t.name),e.tasks[t.sourceGroup].data.splice(t.sourceTask,1))}function i(){t.getTasks(e.currentProject.id,function(t){e.tasks[0].data=t.data,console.log(t.data)})}function o(){t.getUsers(e.currentProject.id,function(t){e.projectUsers=t.data,console.log(e.projectUsers)})}function c(a){t.getProjects(function(t){e.currentProject=t.data[0],e.userProjects=t.data,a&&a()})}function d(e,a){t.assignTaskToUser(e,a,function(e){i()})}function u(){var r={name:e.newTaskListName,project_id:e.currentProject.id};t.createTaskList(r,function(e){a.success(["List de tâches",r.name,"créée."].join(" "))})}e.showTaskCreated=!1,e.newTask={title:"",body:"",endDate:""},e.status={isopen:!1},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.selectedDay=Date.today(),e.onDragOver=function(e,t){},e.tasks=[{name:"à faire",data:[],space:1},{name:"en cours",data:[],space:2},{name:"fait",data:[],space:3}],e.projectUsers=[],e.spaceData=[{},{},{}],e.currentProject={},e.userProjects=[],e.newTaskListName="",e.createTask=r,e.deleteTask=n,e.onDropTaskInList=s,e.assignTaskToUser=d,e.createTaskList=u,function(){t.init(),c(function(){i(),o();for(var t in e.tasks){var a=e.tasks[t];e.spaceData[a.space-1]=a}})}()}var n=e("./_index");n.controller("taskController",["$scope","rq","toastr",r])},{"./_index":3}],15:[function(e,t,a){t.exports=angular.module("appGDP.routerModule",["ui.router","ngCookies"]),{"router.config":e("./router.config.js")}},{"./router.config.js":16}],16:[function(e,t,a){function r(e,t){e.state("main",{url:"/",templateUrl:"views/main.html",controller:"uiController",data:{access:"user"}}).state("tasks",{url:"/tasks",templateUrl:"views/tasks/tasks.html",controller:"taskController",data:{access:"user"}}).state("planning",{url:"/planning",templateUrl:"views/planning/planning.html",controller:"planningController",data:{access:"user"}}),t.otherwise("/")}r.$inject=["$stateProvider","$urlRouterProvider"];var n=e("./_index");n.config(r)},{"./_index":15}]},{},[2]);