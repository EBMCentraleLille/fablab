!function e(t,a,n){function r(i,o){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(s)return s(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var u=a[i]={exports:{}};t[i][0].call(u.exports,function(e){var a=t[i][1][e];return r(a?a:e)},u,u.exports,e,t,a,n)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,a){},{}],2:[function(e,t,a){function n(){var e=["appGDP.routerModule","appGDP.uiModule"];window.appCentralink=angular.module("appGDP",e),angular.bootstrap(document,["appGDP"])}e("fs"),e("./gdp-ui/_index"),e("./ui-router/_index"),angular.element(document).ready(n)},{"./gdp-ui/_index":3,"./ui-router/_index":11,fs:1}],3:[function(e,t,a){t.exports=angular.module("appGDP.uiModule",["ui.bootstrap","ngSanitize","toastr","draganddrop"]),{directives:{"datepicker.directive":e("./directives/datepicker.directive.js"),"draggable.directive":e("./directives/draggable.directive.js"),"droppable.directive":e("./directives/droppable.directive.js"),"editTask.directive":e("./directives/editTask.directive.js")},"planning.controller":e("./planning.controller.js"),"requester.service":e("./requester.service.js"),"task.controller":e("./task.controller.js")}},{"./directives/datepicker.directive.js":4,"./directives/draggable.directive.js":5,"./directives/droppable.directive.js":6,"./directives/editTask.directive.js":7,"./planning.controller.js":8,"./requester.service.js":9,"./task.controller.js":10}],4:[function(e,t,a){function n(){return{restrict:"EA",templateUrl:"views/datepicker.html",link:function(e,t,a){function n(t){e.currentDate.addMonths(t),i()}function r(){for(var e=Date.today().monday(),t=[],a=0;a++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function s(t){t.getMonth()<e.currentDate.getMonth()?n(-1):t.getMonth()>e.currentDate.getMonth()&&n(1),e.selectedDay=angular.copy(t),e.$parent.selectedDay=angular.copy(t),e.dateSelection=!1}function i(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),a=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;a+=a%7==0?0:7-a%7;var n=[],r=angular.copy(t).addDays(1).getDay()-1;-1==r&&(r=6);var s=angular.copy(t).addDays(-r);a+=e.currentDate.getMonth()==angular.copy(s).addDays(a+1).getMonth()?7:0;for(var i=0;i++<a;)s.addDays(1),n.push(angular.copy(s));e.days=n}e.shiftMonth=n,e.pick=s,e.getDays=r,e.currentDate=null,e.dateSelection=!1,e.days=[],e.max=null!=a.max?Date.today().addDays(parseInt(a.max-1)):null,e.min=void 0!=a.min?Date.today().addDays(parseInt(a.min)):null,e.today=Date.today(),function(){i(),r()}()}}}var r=e("../_index");r.directive("datePick",n)},{"../_index":3}],5:[function(e,t,a){function n(){return function(e,t){var a=t[0];a.draggable=!0,a.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),a.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}var r=e("../_index");r.directive("draggable",n)},{"../_index":3}],6:[function(e,t,a){function n(){return{scope:{drop:"&",target:"&",bin:"="},link:function(e,t){var a=t[0];a.addEventListener("dragover",function(t){t.dataTransfer.dropEffect="move",t.preventDefault&&t.preventDefault();var a=t.target.attributes.socket;return console.log(t),a&&a.value==e.gem&&console.log("ok"),this.classList.add("over"),!1},!1),a.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),a.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),a.addEventListener("drop",function(t){t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var a=this.id,n=document.getElementById(t.dataTransfer.getData("Text"));return this.appendChild(n),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(n.id,a)}),!1},!1)}}}var r=e("../_index");r.directive("droppable",n)},{"../_index":3}],7:[function(e,t,a){function n(){return{restrict:"E",templateUrl:"views/tasks/edit-task.html"}}var r=e("../_index");r.directive("editTask",n)},{"../_index":3}],8:[function(e,t,a){function n(e,t,a){function n(t){e.currentDate.addMonths(t),o()}function r(a){t.getProjects(function(t){e.currentProject=t.data[0],e.userProjects=t.data,a&&a()})}function s(){t.getTasks(e.currentProject.id,function(t){for(var a in t.data){var n=new Date(t.data[a].end_date);e.tasks[n]||(e.tasks[n]=[]),e.tasks[n].push(t.data[a])}c(0)})}function i(){for(var e=Date.today().monday(),t=[],a=0;a++<7;)t.push(e.toString("dddd").slice(0,2)),e.addDays(1);return t}function o(){e.currentDate||(e.currentDate=Date.today());var t=e.currentDate.moveToFirstDayOfMonth(),a=new Array(Date.getDaysInMonth(e.currentDate.getFullYear(),e.currentDate.getMonth())).length;a+=a%7==0?0:7-a%7;var n=[],r=angular.copy(t).addDays(1).getDay()-1;-1==r&&(r=6);var s=angular.copy(t).addDays(-r);a+=e.currentDate.getMonth()==angular.copy(s).addDays(a+1).getMonth()?7:0;for(var i=0;i++<a;)s.addDays(1),s.toString()==Date.today().toString()&&(e.startWeek=Math.floor(i/7)),n.push(angular.copy(s));e.days=n}function c(t){if(t)if(e.currentWeek+t<0){var a=e.days[0].getDate();n(-1);var r=Math.floor((e.days.length-1)/7)-1;e.currentWeek=a==e.days.length-7?r-1:r}else if(e.days.length<7*(e.currentWeek+1+t)){var a=e.days[e.days.length-7].getDate();n(1),e.currentWeek=e.days[0].getDate()==a?1:0}else e.currentWeek+=t;else e.currentWeek=e.startWeek;var s=e.currentWeek;e.daysWeek=[];for(var i=7*s;7*(s+1)>i;i++)e.daysWeek[i-7*s]=e.days[i];return!0}e.tasks={},e.shiftMonth=n,e.getDays=i,e.processWeek=c,e.currentDate=null,e.dateSelection=!1,e.days=[],e.startWeek=0,e.daysWeek=[],e.currentWeek=0,e.today=Date.today(),e.getDays=i,e.currentProject={},function(){console.log("test"),t.init(),r(function(){s(),o()})}()}var r=e("./_index");r.controller("planningController",["$scope","rq","toastr",n])},{"./_index":3}],9:[function(e,t,a){function n(e){function t(t,a){e.get(t).then(a,D)}function a(t,a,n){e.post(t,a).then(n,D)}function n(t,a,n){e.put(t,a).then(n,D)}function r(t,a){e["delete"](t).then(a,D)}function s(e,t){return{login:"/api/login_check",tasks:"/gdp/api/projects/"+e+"/tasks",listCreate:"/gdp/api/lists",lists:"/gdp/api/projects/"+e+"/lists",deleteTask:"/gdp/api/tasks/"+e,users:"/gdp/api/projects/"+e+"/users",projects:"/gdp/api/users/project",assignTask:"/gdp/api/tasks/"+e+"/users/"+t,taskListAdd:"/gdp/api/lists"+e+"/adds/"+t,taskListDelete:"/gdp/api/lists/"+e}}function i(){JWTTOKEN&&(e.defaults.headers.common.Authorization="Bearer "+JWTTOKEN)}function o(e,a){var n=new s(e);t(n.users,a)}function c(e){var a=new s(null);t(a.projects,e)}function d(e,t,n){var r=new s(e);a(r.tasks,t,n)}function u(e,a){var n=new s(e);t(n.tasks,a)}function l(e,t){var a=new s(e);r(a.deleteTask,t)}function p(e,t,a){var r=new s(e,t);n(r.assignTask,{},a)}function f(e,t){var n=new s(null);a(n.listCreate,e,t)}function g(e,a){var n=new s(e);t(n.lists,a)}function k(e,t,a){var r=new s(e,t);n(r.taskListAdd,{},a)}function v(e,t){var a=new s(e);r(a.taskListDelete,t)}function D(e){console.log(e)}var y={init:i,createTask:d,getTasks:u,deleteTask:l,getUsers:o,getProjects:c,assignTaskToUser:p,getTaskLists:g,createTaskList:f,getTaskLists:g,addTaskToList:k,deleteTaskList:v};return y}var r=e("./_index");r.factory("rq",["$http",n])},{"./_index":3}],10:[function(e,t,a){function n(e,t,a){function n(){e.showTaskListDelete||e.showTaskCreated?(e.showTaskListDelete=!1,e.showTaskCreated=!1):e.showTaskListDelete=!0}function r(n){e.newTask.endDate=e.selectedDay.toString(),e.newTask.taskList=n,t.createTask(e.currentProject.id,e.newTask,function(){a.success(["Tâche",e.newTask.title,"créée!"].join(" ")),e.newTask={title:"",body:"",endDate:""},o()})}function s(e,n){t.deleteTask(e,function(e){a.success(["Task",n,"has been removed."].join(" ")),o()})}function i(t,a){t=t["json/task"],t&&(a.data.push(t.name),e.tasks[t.sourceGroup].data.splice(t.sourceTask,1))}function o(){t.getTasks(e.currentProject.id,function(t){e.tasks[0].data=t.data})}function c(){t.getUsers(e.currentProject.id,function(t){e.projectUsers=t.data})}function d(a){t.getProjects(function(t){e.currentProject=t.data[0],e.userProjects=t.data,a&&a()})}function u(e,a){t.assignTaskToUser(e,a,function(e){o()})}function l(){var n={name:e.newTaskListName,project_id:e.currentProject.id};t.createTaskList(n,function(t){a.success(["Liste de tâches",n.name,"créée."].join(" ")),e.newTaskListName="",f()})}function p(e){t.deleteTaskList(e,function(e){a.success("Liste de tâches supprimée."),f()})}function f(){t.getTaskLists(e.currentProject.id,function(t){e.taskLists=t.data,console.log(t.data)})}e.newTask={title:"",body:"",endDate:""},e.status={isopen:!1},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.selectedDay=Date.today(),e.onDragOver=function(e,t){},e.tasks=[{name:"à faire",data:[],space:1},{name:"en cours",data:[],space:2},{name:"fait",data:[],space:3}],e.taskLists=[],e.projectUsers=[],e.spaceData=[{},{},{}],e.currentProject={},e.userProjects=[],e.newTaskListName="",e.showTaskListDelete=!1,e.showTaskCreated=!1,e.createTask=r,e.deleteTask=s,e.onDropTaskInList=i,e.assignTaskToUser=u,e.createTaskList=l,e.deleteTaskList=p,e.doCancelButton=n,function(){t.init(),d(function(){f(),c();for(var t in e.tasks){var a=e.tasks[t];e.spaceData[a.space-1]=a}})}()}var r=e("./_index");r.controller("taskController",["$scope","rq","toastr",n])},{"./_index":3}],11:[function(e,t,a){t.exports=angular.module("appGDP.routerModule",["ui.router","ngCookies"]),{"router.config":e("./router.config.js")}},{"./router.config.js":12}],12:[function(e,t,a){function n(e,t){e.state("tasks",{url:"/tasks",templateUrl:"views/tasks/tasks.html",controller:"taskController",data:{access:"user"}}).state("planning",{url:"/planning",templateUrl:"views/planning/planning.html",controller:"planningController",data:{access:"user"}}),t.otherwise("/tasks")}n.$inject=["$stateProvider","$urlRouterProvider"];var r=e("./_index");r.config(n)},{"./_index":11}]},{},[2]);